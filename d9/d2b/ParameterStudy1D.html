<!-- HTML header for doxygen 1.8.18-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MercuryDPM: Parameter study in 1D parameter space</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../MDPM.css" rel="stylesheet" type="text/css"/>
<link href="../../codeLabels.css" rel="stylesheet" type="text/css"/>
<link href="../../MDPM-fork-corner.css" rel="stylesheet" type="text/css"/>
<link href="../../MDPM-dropdown-version.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../MDPM-fragment-copy-button.js"></script>
<script type="text/javascript">
DoxygenAwesomeFragmentCopyButton.init()
</script>
<script type="text/javascript" src="../../MDPM-paragraph-link.js"></script>
<script type="text/javascript">
DoxygenAwesomeParagraphLink.init()
</script>
<script type="text/javascript" src="../../MDPM-interactive-toc.js"></script>
<script type="text/javascript">
DoxygenAwesomeInteractiveToc.init()
</script>
<script type="text/javascript" src="../../MDPM-darkmode-toggle.js"></script>
<script type="text/javascript">
DoxygenAwesomeDarkModeToggle.init()
</script>
</head>
<body>
  <div id="bitbucket-corner">
   <a href="https://bitbucket.org/mercurydpm/mercurydpm/src/master/" target="_blank" id="fork-corner" class="fork-corner fc-pos-tr fc-animate fc-theme-bitbucket"></a>
  </div>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../mercury-logo-chosen-light-slogan.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname"> <!--MercuryDPM--!>
   <!-- BEGIN version select -->
   <div class="dropdown" id="projectnumber">
    <button class="dropbtn">v1.0</button>
    <div class="dropdown-content">
    </div>
   </div>
   <script type="text/javascript" src="../../MDPM-dropdown-version.js"></script>
<!-- END version select -->
   <!--&#160;<span id="projectnumber">revision: v1.0</span>-->
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<script type="text/javascript" src="../../MDPM-fork-corner.js"></script>
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('d9/d2b/ParameterStudy1D.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Parameter study in 1D parameter space </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h4><a class="anchor" id="autotoc_md173"></a>
Problem description</h4>
<p>This tutorial shows how to do a parameter study by using the DPMBase::autonumber function in DPMBase. This tutorial treats the case in which only a 1D parameter study has to be performed, for example one wants to study the same setup but for different particle sizes. In the image below a schematic overview is given for a 1D parameter study, This tutorial explains only how to setup a parameter study, for (more) realistic geometries or complicated setups one is referred to the other tutorials. <br  />
Definition of words:<br  />
Parameter study: The complete set of simulations that needs to be run in which parameters change value based on the dimension set. This is done by creating a executable of the complete parameter study that is capable of starting many simulations. Parameter study is sometimes abbreviated to study. <br  />
Simulation: A single simulation that is part of the parameter study. The simulation is not a distinct executable, but run through the parameter study executable.</p>
<div class="image">
<img src="../../GridParamStudy1D.png" alt=""/>
<div class="caption">
Schematic overview of a 1D parameter study. Definitions of i and dim1 will be given later.</div></div>
<h3><a class="anchor" id="autotoc_md174"></a>
Headers</h3>
<p>The following headers are included: <br  />
</p><div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="../../d8/d02/Mercury3D_8h.html">Mercury3D.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="../../d5/d10/Math_2Helpers_8h.html">Math/Helpers.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="../../d8/deb/LinearViscoelasticFrictionSpecies_8h.html">Species/LinearViscoelasticFrictionSpecies.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;vector&gt;</span></div>
<div class="ttc" id="aLinearViscoelasticFrictionSpecies_8h_html"><div class="ttname"><a href="../../d8/deb/LinearViscoelasticFrictionSpecies_8h.html">LinearViscoelasticFrictionSpecies.h</a></div></div>
<div class="ttc" id="aMath_2Helpers_8h_html"><div class="ttname"><a href="../../d5/d10/Math_2Helpers_8h.html">Helpers.h</a></div></div>
<div class="ttc" id="aMercury3D_8h_html"><div class="ttname"><a href="../../d8/d02/Mercury3D_8h.html">Mercury3D.h</a></div></div>
</div><!-- fragment --><p>These are the headers needed for this tutorial.</p>
<h2><a class="anchor" id="autotoc_md175"></a>
Before the main function</h2>
<p>The main class inherits from Mercury3D.<br  />
</p><div class="fragment"><div class="line"><span class="keyword">class </span><a class="code" href="../../d3/d42/classParameterStudy1DDemo.html">ParameterStudy1DDemo</a>: <span class="keyword">public</span> <a class="code" href="../../d3/db1/classMercury3D.html">Mercury3D</a> </div>
<div class="ttc" id="aclassMercury3D_html"><div class="ttname"><a href="../../d3/db1/classMercury3D.html">Mercury3D</a></div><div class="ttdoc">This adds on the hierarchical grid code for 3D problems.</div><div class="ttdef"><b>Definition:</b> Mercury3D.h:16</div></div>
<div class="ttc" id="aclassParameterStudy1DDemo_html"><div class="ttname"><a href="../../d3/d42/classParameterStudy1DDemo.html">ParameterStudy1DDemo</a></div><div class="ttdoc">[PAR_SIM1D:headers]</div><div class="ttdef"><b>Definition:</b> ParameterStudy1DDemo.cpp:15</div></div>
</div><!-- fragment --><p> All steps needed in order to create this class are explained below. <br  />
 Step 1: (Private) Member variables. <br  />
The private member variables are needed in order to keep track of which simulation has to be run next, these are stored in studyNum. The total amount of simulations that need to be performed are stored in dim1_. studyNum is build up as follows: <br  />
The first entry is storing an integer giving information on the completeness of the study. If the value is 0 the parameter study is incomplete, if the value is 1 (or larger) the study is complete. <br  />
The second entry is storing the current run in the first dimension of the parameter study. </p><div class="fragment"><div class="line">    <span class="keywordtype">int</span> dim1_ = 0;</div>
<div class="line">    std::vector&lt;int&gt; studyNum;</div>
</div><!-- fragment --><p> Step 2: Set- and Get-functions for private member variables. <br  />
The set- and get-functions are needed to access the private member variables in the public member functions of ParameterStudy1DDemo. </p><div class="fragment"><div class="line">    <span class="keywordtype">void</span> setStudyDimensions(<span class="keywordtype">int</span> dim1)</div>
<div class="line">    {</div>
<div class="line">        dim1_ = dim1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    std::vector&lt;int&gt; getCurrentStudyNum()</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">return</span> <a class="code" href="../../d5/d89/classDPMBase.html#a8746c3c7d69595d530bcb5ab8a23a026">DPMBase::get1DParametersFromRunNumber</a>(dim1_);</div>
<div class="line">    }</div>
<div class="ttc" id="aclassDPMBase_html_a8746c3c7d69595d530bcb5ab8a23a026"><div class="ttname"><a href="../../d5/d89/classDPMBase.html#a8746c3c7d69595d530bcb5ab8a23a026">DPMBase::get1DParametersFromRunNumber</a></div><div class="ttdeci">std::vector&lt; int &gt; get1DParametersFromRunNumber(int size_x) const</div><div class="ttdoc">This turns a counter into 1 index, which is a useful feature for performing 1D parameter study....</div><div class="ttdef"><b>Definition:</b> DPMBase.cc:661</div></div>
</div><!-- fragment --><p> Step 3: Create the particle species. <br  />
In this case it has been chosen to create a separate function for the particle species. In principle any contact model can be chosen here, but for the sake of simplicity a simple LinearViscoelasticFrictionSpecies is implemented. </p><div class="fragment"><div class="line">    <span class="keywordtype">void</span> createSpecies()</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// Setup the contact model for the species</span></div>
<div class="line">        <a class="code" href="../../d9/d0c/classSpecies.html">LinearViscoelasticFrictionSpecies</a> species;</div>
<div class="line">        species.<a class="code" href="../../dc/d02/classParticleSpecies.html#a274df9fa08ef5580e54f8e9301f1b348">setDensity</a>(2000);</div>
<div class="line">        <span class="comment">//specify contact properties</span></div>
<div class="line">        <span class="comment">//normal forces</span></div>
<div class="line">        species.<a class="code" href="../../dd/de0/classLinearViscoelasticNormalSpecies.html#ad179cd0c4c13e4d54ae243956ce5a07d">setStiffness</a>(1e5);</div>
<div class="line">        species.<a class="code" href="../../dd/de0/classLinearViscoelasticNormalSpecies.html#a73d0ff3e1ac4c6cb75dae0b623d7a13b">setDissipation</a>(0.63);</div>
<div class="line">        <span class="comment">//tangential (sliding) forces</span></div>
<div class="line">        species.<a class="code" href="../../d7/d78/classSlidingFrictionSpecies.html#a8c69c217e4962c8b5f9b3b236b8daf4a">setSlidingFrictionCoefficient</a>(0.5);</div>
<div class="line">        species.<a class="code" href="../../d7/d78/classSlidingFrictionSpecies.html#a2cd1b29908398a04467717d523bdbfc3">setSlidingStiffness</a>(1.2e4);</div>
<div class="line">        species.<a class="code" href="../../d7/d78/classSlidingFrictionSpecies.html#a725e7fa460f650e06b9abeffd5962f56">setSlidingDissipation</a>(0.16);</div>
<div class="line">        <span class="comment">//tangential (rolling) torques</span></div>
<div class="line">        species.<a class="code" href="../../d2/de3/classFrictionSpecies.html#a076a6965983e7e9cb6496a213362b61c">setRollingFrictionCoefficient</a>(0.2);</div>
<div class="line">        species.<a class="code" href="../../d2/de3/classFrictionSpecies.html#ad666e4e01847bcb6776bb398c796fe14">setRollingStiffness</a>(1.2e4);</div>
<div class="line">        species.<a class="code" href="../../d2/de3/classFrictionSpecies.html#a32f6e300970a98a1d5f85b2d6f5c36f6">setRollingDissipation</a>(6.3e-2);</div>
<div class="line">        <span class="comment">//normal (torsion/spin) torques</span></div>
<div class="line">        species.<a class="code" href="../../d2/de3/classFrictionSpecies.html#acf5ede858c22fe6d9ef9dfa9626f40a6">setTorsionFrictionCoefficient</a>(0.1);</div>
<div class="line">        species.<a class="code" href="../../d2/de3/classFrictionSpecies.html#a28cc6102a37c9a165eb6866979926103">setTorsionStiffness</a>(1.2e4);</div>
<div class="line">        species.<a class="code" href="../../d7/d78/classSlidingFrictionSpecies.html#a725e7fa460f650e06b9abeffd5962f56">setSlidingDissipation</a>(6.3e-2);</div>
<div class="line">        speciesHandler.copyAndAddObject(species);</div>
<div class="line">    }</div>
<div class="ttc" id="aclassFrictionSpecies_html_a076a6965983e7e9cb6496a213362b61c"><div class="ttname"><a href="../../d2/de3/classFrictionSpecies.html#a076a6965983e7e9cb6496a213362b61c">FrictionSpecies::setRollingFrictionCoefficient</a></div><div class="ttdeci">void setRollingFrictionCoefficient(Mdouble new_mu)</div><div class="ttdoc">Allows the (dynamic) Coulomb friction coefficient to be changed; also sets mu_s by default.</div><div class="ttdef"><b>Definition:</b> FrictionSpecies.cc:165</div></div>
<div class="ttc" id="aclassFrictionSpecies_html_a28cc6102a37c9a165eb6866979926103"><div class="ttname"><a href="../../d2/de3/classFrictionSpecies.html#a28cc6102a37c9a165eb6866979926103">FrictionSpecies::setTorsionStiffness</a></div><div class="ttdeci">void setTorsionStiffness(Mdouble new_kt)</div><div class="ttdoc">Allows the torsion stiffness to be changed.</div><div class="ttdef"><b>Definition:</b> FrictionSpecies.cc:201</div></div>
<div class="ttc" id="aclassFrictionSpecies_html_a32f6e300970a98a1d5f85b2d6f5c36f6"><div class="ttname"><a href="../../d2/de3/classFrictionSpecies.html#a32f6e300970a98a1d5f85b2d6f5c36f6">FrictionSpecies::setRollingDissipation</a></div><div class="ttdeci">void setRollingDissipation(Mdouble new_dispt)</div><div class="ttdoc">Allows the tangential viscosity to be changed.</div><div class="ttdef"><b>Definition:</b> FrictionSpecies.cc:147</div></div>
<div class="ttc" id="aclassFrictionSpecies_html_acf5ede858c22fe6d9ef9dfa9626f40a6"><div class="ttname"><a href="../../d2/de3/classFrictionSpecies.html#acf5ede858c22fe6d9ef9dfa9626f40a6">FrictionSpecies::setTorsionFrictionCoefficient</a></div><div class="ttdeci">void setTorsionFrictionCoefficient(Mdouble new_mu)</div><div class="ttdoc">Allows the (dynamic) Coulomb torsion friction coefficient to be changed; also sets mu_s by default.</div><div class="ttdef"><b>Definition:</b> FrictionSpecies.cc:238</div></div>
<div class="ttc" id="aclassFrictionSpecies_html_ad666e4e01847bcb6776bb398c796fe14"><div class="ttname"><a href="../../d2/de3/classFrictionSpecies.html#ad666e4e01847bcb6776bb398c796fe14">FrictionSpecies::setRollingStiffness</a></div><div class="ttdeci">void setRollingStiffness(Mdouble new_kt)</div><div class="ttdoc">Allows the spring constant to be changed.</div><div class="ttdef"><b>Definition:</b> FrictionSpecies.cc:128</div></div>
<div class="ttc" id="aclassLinearViscoelasticNormalSpecies_html_a73d0ff3e1ac4c6cb75dae0b623d7a13b"><div class="ttname"><a href="../../dd/de0/classLinearViscoelasticNormalSpecies.html#a73d0ff3e1ac4c6cb75dae0b623d7a13b">LinearViscoelasticNormalSpecies::setDissipation</a></div><div class="ttdeci">void setDissipation(Mdouble dissipation)</div><div class="ttdoc">Allows the normal dissipation to be changed.</div><div class="ttdef"><b>Definition:</b> LinearViscoelasticNormalSpecies.cc:96</div></div>
<div class="ttc" id="aclassLinearViscoelasticNormalSpecies_html_ad179cd0c4c13e4d54ae243956ce5a07d"><div class="ttname"><a href="../../dd/de0/classLinearViscoelasticNormalSpecies.html#ad179cd0c4c13e4d54ae243956ce5a07d">LinearViscoelasticNormalSpecies::setStiffness</a></div><div class="ttdeci">void setStiffness(Mdouble new_k)</div><div class="ttdoc">Allows the spring constant to be changed.</div><div class="ttdef"><b>Definition:</b> LinearViscoelasticNormalSpecies.cc:72</div></div>
<div class="ttc" id="aclassParticleSpecies_html_a274df9fa08ef5580e54f8e9301f1b348"><div class="ttname"><a href="../../dc/d02/classParticleSpecies.html#a274df9fa08ef5580e54f8e9301f1b348">ParticleSpecies::setDensity</a></div><div class="ttdeci">void setDensity(Mdouble density)</div><div class="ttdef"><b>Definition:</b> ParticleSpecies.cc:88</div></div>
<div class="ttc" id="aclassSlidingFrictionSpecies_html_a2cd1b29908398a04467717d523bdbfc3"><div class="ttname"><a href="../../d7/d78/classSlidingFrictionSpecies.html#a2cd1b29908398a04467717d523bdbfc3">SlidingFrictionSpecies::setSlidingStiffness</a></div><div class="ttdeci">void setSlidingStiffness(Mdouble new_kt)</div><div class="ttdoc">Allows the spring constant to be changed.</div><div class="ttdef"><b>Definition:</b> SlidingFrictionSpecies.cc:83</div></div>
<div class="ttc" id="aclassSlidingFrictionSpecies_html_a725e7fa460f650e06b9abeffd5962f56"><div class="ttname"><a href="../../d7/d78/classSlidingFrictionSpecies.html#a725e7fa460f650e06b9abeffd5962f56">SlidingFrictionSpecies::setSlidingDissipation</a></div><div class="ttdeci">void setSlidingDissipation(Mdouble new_dispt)</div><div class="ttdoc">Allows the tangential viscosity to be changed.</div><div class="ttdef"><b>Definition:</b> SlidingFrictionSpecies.cc:102</div></div>
<div class="ttc" id="aclassSlidingFrictionSpecies_html_a8c69c217e4962c8b5f9b3b236b8daf4a"><div class="ttname"><a href="../../d7/d78/classSlidingFrictionSpecies.html#a8c69c217e4962c8b5f9b3b236b8daf4a">SlidingFrictionSpecies::setSlidingFrictionCoefficient</a></div><div class="ttdeci">void setSlidingFrictionCoefficient(Mdouble new_mu)</div><div class="ttdoc">Allows the (dynamic) Coulomb friction coefficient to be changed; also sets mu_s by default.</div><div class="ttdef"><b>Definition:</b> SlidingFrictionSpecies.cc:120</div></div>
<div class="ttc" id="aclassSpecies_html"><div class="ttname"><a href="../../d9/d0c/classSpecies.html">Species&lt; LinearViscoelasticNormalSpecies, FrictionSpecies &gt;</a></div></div>
</div><!-- fragment --><p> Step 4: Setup the initial conditions. <br  />
The initial conditions are run inside the <a class="el" href="../../d5/d89/classDPMBase.html#ac5d9774a747939873a95f5e612b9e070">DPMBase::solve()</a> routine. This means that before the actual simulation is started, this function is run first. This makes us able to do the following things. First we get the studyNum, as we need this information to setup the current simulation. Also the createSpecies function is called (see Step 3). Afterwards two particles are inserted. Note that in these lines the studyNum is used to change the particle radius of particle 1. the variable studyNum gets assigned integer values, starting from 1 and ranging to dim1_ (which will be set through main()). </p><div class="fragment"><div class="line">    <span class="keywordtype">void</span> setupInitialConditions()<span class="keyword"> override</span></div>
<div class="line"><span class="keyword">    </span>{</div>
<div class="line">        studyNum = getCurrentStudyNum();</div>
<div class="line">        createSpecies();</div>
<div class="line"> </div>
<div class="line">        <a class="code" href="../../d7/d41/classSphericalParticle.html">SphericalParticle</a> <a class="code" href="../../de/dbd/namespaceGlobal__Physical__Variables.html#a23c2ade6398f54040b869f7f3a2bcc4b">P</a>;</div>
<div class="line">        <a class="code" href="../../de/dbd/namespaceGlobal__Physical__Variables.html#a23c2ade6398f54040b869f7f3a2bcc4b">P</a>.setSpecies(speciesHandler.getObject(0));</div>
<div class="line">        <span class="comment">// Create 2 particles</span></div>
<div class="line">        particleHandler.copyAndAddObject(<a class="code" href="../../de/dbd/namespaceGlobal__Physical__Variables.html#a23c2ade6398f54040b869f7f3a2bcc4b">P</a>);</div>
<div class="line">        particleHandler.copyAndAddObject(<a class="code" href="../../de/dbd/namespaceGlobal__Physical__Variables.html#a23c2ade6398f54040b869f7f3a2bcc4b">P</a>);</div>
<div class="line">        <span class="comment">//Set up the stuff that is the same for all runs</span></div>
<div class="line">        particleHandler.getObject(0)-&gt;setPosition(<a class="code" href="../../d5/dc1/classVec3D.html">Vec3D</a>(0.006,0.005,0.0));</div>
<div class="line">        particleHandler.getObject(1)-&gt;setPosition(<a class="code" href="../../d5/dc1/classVec3D.html">Vec3D</a>(0.004,0.005,0.0));</div>
<div class="line">        particleHandler.getObject(0)-&gt;setVelocity(<a class="code" href="../../d5/dc1/classVec3D.html">Vec3D</a>(-0.1,0.0,0.0));</div>
<div class="line">        particleHandler.getObject(1)-&gt;setVelocity(<a class="code" href="../../d5/dc1/classVec3D.html">Vec3D</a>( 0.1,0.0,0.0));</div>
<div class="line">        <span class="comment">// We have two different sized particles for the left and right particle</span></div>
<div class="line">        <span class="comment">// The value gets updated based on what studyNum is, these come from the automatic counter</span></div>
<div class="line">        particleHandler.getObject(0)-&gt;setRadius(0.0001*studyNum[1]);</div>
<div class="line">        particleHandler.getObject(1)-&gt;setRadius(0.0001);</div>
<div class="line">    }</div>
<div class="ttc" id="aclassSphericalParticle_html"><div class="ttname"><a href="../../d7/d41/classSphericalParticle.html">SphericalParticle</a></div><div class="ttdoc">A spherical particle is the most simple particle used in MercuryDPM.</div><div class="ttdef"><b>Definition:</b> SphericalParticle.h:16</div></div>
<div class="ttc" id="aclassVec3D_html"><div class="ttname"><a href="../../d5/dc1/classVec3D.html">Vec3D</a></div><div class="ttdef"><b>Definition:</b> Kernel/Math/Vector.h:30</div></div>
<div class="ttc" id="anamespaceGlobal__Physical__Variables_html_a23c2ade6398f54040b869f7f3a2bcc4b"><div class="ttname"><a href="../../de/dbd/namespaceGlobal__Physical__Variables.html#a23c2ade6398f54040b869f7f3a2bcc4b">Global_Physical_Variables::P</a></div><div class="ttdeci">double P</div><div class="ttdoc">Uniform pressure.</div><div class="ttdef"><b>Definition:</b> TwenteMeshGluing.cpp:77</div></div>
</div><!-- fragment --><p> Step 5: Setting up the parameter study. <br  />
This is probably the most difficult part of the tutorial, as the previous steps are similar to other tutorials that can be found. The desire is to create a smart algorithm to decide what simulation runs have to be performed. It might happen that one runs the executable twice in the same directory, or that you want to extend the previous dimension of your parameter study. In this case the previous simulations do not need to be rerun, as all the data is already known and stored. Hence in actionsBeforeTimeLoop this is checked by looking for data-files of a certain name as well as checking the studyNum. If the study is complete the parameter study is done, and hence the process is terminated by the exit code. If the data-file has been found, but the study is not yet complete the program is taking a short-cut by skipping the current simulation (without rerunning) and starting the next. <br  />
 Please Note: Not all systems use the same syntax to start simulations. For this reason the entry in the functions "launchNewRun(..)" might be slightly different depending on the operating system you use. </p><div class="fragment"><div class="line">    <span class="keywordtype">void</span> actionsBeforeTimeLoop()<span class="keyword"> override</span></div>
<div class="line"><span class="keyword">    </span>{</div>
<div class="line">        <a class="code" href="../../d2/dc3/namespaceoomph_1_1Global__string__for__annotation.html#ac5379de2fa7fe44f2cb31785fc208135">std::string</a> <a class="code" href="../../de/d6c/namespaceUniformPSDSelfTest.html#af953bf7440054893c1581198f153813e">fileName</a> = this-&gt;<a class="code" href="../../d9/d33/namespacecalibrate.html#a173fcbfc9fd384d71221086fcf075042">dataFile</a>.getName();</div>
<div class="line">        <span class="keywordflow">if</span> (studyNum[0] &gt; 0)</div>
<div class="line">        {</div>
<div class="line">            <a class="code" href="../../df/d79/Logger_8cc.html#a6bb54690071023a814dfcb33b0a5d9a4">logger</a>(<a class="code" href="../../db/ddd/mumps__solver_8h.html#a02cc55424e6075b41dcb20cfe3178d54">INFO</a>, <span class="stringliteral">&quot;Study is complete.&quot;</span>);</div>
<div class="line">            std::exit(0);</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d9/d41/namespacehelpers.html#a4d9ab913434bdda1d39b10323616f615">helpers::fileExists</a>(<a class="code" href="../../de/d6c/namespaceUniformPSDSelfTest.html#af953bf7440054893c1581198f153813e">fileName</a>))</div>
<div class="line">        {</div>
<div class="line">            <span class="comment">//If it has move on to the next run immediately</span></div>
<div class="line">            <a class="code" href="../../df/d79/Logger_8cc.html#a6bb54690071023a814dfcb33b0a5d9a4">logger</a>(<a class="code" href="../../db/ddd/mumps__solver_8h.html#a02cc55424e6075b41dcb20cfe3178d54">INFO</a>,<span class="stringliteral">&quot;This run has been done: %&quot;</span>, this-&gt;<a class="code" href="../../d9/d33/namespacecalibrate.html#a173fcbfc9fd384d71221086fcf075042">dataFile</a>.getName());</div>
<div class="line">            <a class="code" href="../../df/d79/Logger_8cc.html#a6bb54690071023a814dfcb33b0a5d9a4">logger</a>(<a class="code" href="../../db/ddd/mumps__solver_8h.html#a02cc55424e6075b41dcb20cfe3178d54">INFO</a>,<span class="stringliteral">&quot;Launching next run \n\n&quot;</span>);</div>
<div class="line">            launchNewRun(<span class="stringliteral">&quot;./ParameterStudy1DDemo&quot;</span>);</div>
<div class="line">            std::exit(0);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="ttc" id="aLogger_8cc_html_a6bb54690071023a814dfcb33b0a5d9a4"><div class="ttname"><a href="../../df/d79/Logger_8cc.html#a6bb54690071023a814dfcb33b0a5d9a4">logger</a></div><div class="ttdeci">Logger&lt; MERCURYDPM_LOGLEVEL &gt; logger(&quot;MercuryKernel&quot;)</div><div class="ttdoc">Definition of different loggers with certain modules. A user can define its own custom logger here.</div></div>
<div class="ttc" id="amumps__solver_8h_html_a02cc55424e6075b41dcb20cfe3178d54"><div class="ttname"><a href="../../db/ddd/mumps__solver_8h.html#a02cc55424e6075b41dcb20cfe3178d54">INFO</a></div><div class="ttdeci">#define INFO(i)</div><div class="ttdef"><b>Definition:</b> mumps_solver.h:54</div></div>
<div class="ttc" id="anamespaceUniformPSDSelfTest_html_af953bf7440054893c1581198f153813e"><div class="ttname"><a href="../../de/d6c/namespaceUniformPSDSelfTest.html#af953bf7440054893c1581198f153813e">UniformPSDSelfTest.fileName</a></div><div class="ttdeci">string fileName</div><div class="ttdef"><b>Definition:</b> UniformPSDSelfTest.py:10</div></div>
<div class="ttc" id="anamespacecalibrate_html_a173fcbfc9fd384d71221086fcf075042"><div class="ttname"><a href="../../d9/d33/namespacecalibrate.html#a173fcbfc9fd384d71221086fcf075042">calibrate.dataFile</a></div><div class="ttdeci">string dataFile</div><div class="ttdef"><b>Definition:</b> calibrate.py:175</div></div>
<div class="ttc" id="anamespacehelpers_html_a4d9ab913434bdda1d39b10323616f615"><div class="ttname"><a href="../../d9/d41/namespacehelpers.html#a4d9ab913434bdda1d39b10323616f615">helpers::fileExists</a></div><div class="ttdeci">bool fileExists(const std::string &amp;strFilename)</div><div class="ttdoc">Function to check if a file exists, is used to check if a run has already need done.</div><div class="ttdef"><b>Definition:</b> FileIOHelpers.cc:77</div></div>
<div class="ttc" id="anamespaceoomph_1_1Global__string__for__annotation_html_ac5379de2fa7fe44f2cb31785fc208135"><div class="ttname"><a href="../../d2/dc3/namespaceoomph_1_1Global__string__for__annotation.html#ac5379de2fa7fe44f2cb31785fc208135">oomph::Global_string_for_annotation::string</a></div><div class="ttdeci">std::string string(const unsigned &amp;i)</div><div class="ttdef"><b>Definition:</b> oomph_definitions.cc:286</div></div>
</div><!-- fragment --><p> If none ot the above options are triggered, in other words the simulation has to be performed, the code is simply run. At the end of the simulation it is once again checked if the parameter study is completed (the case if this simulation is the last one of the study) or if a new simulation has to be started. </p><div class="fragment"><div class="line">    <span class="keywordtype">void</span> actionsAfterSolve()<span class="keyword"> override</span></div>
<div class="line"><span class="keyword">    </span>{</div>
<div class="line">        <span class="keywordflow">if</span> (studyNum[0] &gt; 0)</div>
<div class="line">        {</div>
<div class="line">            <a class="code" href="../../df/d79/Logger_8cc.html#a6bb54690071023a814dfcb33b0a5d9a4">logger</a>(<a class="code" href="../../df/d79/Logger_8cc.html#ab9e9de82aad2d77d9647f823fc75c33e">ERROR</a>, <span class="stringliteral">&quot;Study was already completed, no new simulations ran.&quot;</span>);</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">        {</div>
<div class="line">            <span class="comment">//If the study is not complete save the data to disk and move on</span></div>
<div class="line">            writeRestartFile();</div>
<div class="line">            <a class="code" href="../../df/d79/Logger_8cc.html#a6bb54690071023a814dfcb33b0a5d9a4">logger</a>(<a class="code" href="../../db/ddd/mumps__solver_8h.html#a02cc55424e6075b41dcb20cfe3178d54">INFO</a>,<span class="stringliteral">&quot;Launching next run \n\n&quot;</span>);</div>
<div class="line">            launchNewRun(<span class="stringliteral">&quot;./ParameterStudy1DDemo&quot;</span>);</div>
<div class="line">            std::exit(0);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="ttc" id="aLogger_8cc_html_ab9e9de82aad2d77d9647f823fc75c33e"><div class="ttname"><a href="../../df/d79/Logger_8cc.html#ab9e9de82aad2d77d9647f823fc75c33e">ERROR</a></div><div class="ttdeci">LL&lt; Log::ERROR &gt; ERROR</div><div class="ttdoc">Error log level.</div><div class="ttdef"><b>Definition:</b> Logger.cc:32</div></div>
</div><!-- fragment --><p> Step 6: Creating the main() function The main function contains some core function calls that setup the parameter study, but also have some information that is the same for each simulation (e.g. the system dimensions). In principle one could place everything that is equal in all simulations here. Typically one wants to perform a parameter study in which particle properties or contact models are changed, hence these can be found in the ParameterStudy1DDemo class, it is less likely that the system dimensions need to be changed. If however this is the case for you, simply move the lines setXMax(), etc. to the setupInitialConditions(). The key line in main() is problem.autonumber(), this creates the file COUNTERDONOTDEL and stores the information needed for the parameter study. This file should only be deleted in the cases: The data is backed up in a different directory (as then the executable is no longer able to make changes).<br  />
One wants to rerun the parameter study completely. <br  />
The last thing we need to do is to set the dimension os the 1D parameter study, in this case it is set to 4. This means that in total we want 4 simulations. </p><div class="fragment"><div class="line"><span class="keywordtype">int</span> <a class="code" href="../../d9/d18/T__protectiveWall_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97">main</a>(<span class="keywordtype">int</span> argc <a class="code" href="../../d5/de4/GeneralDefine_8h.html#addf5ec070e9499d36b7f2009ce736076">UNUSED</a>, <span class="keywordtype">char</span> *argv[] <a class="code" href="../../d5/de4/GeneralDefine_8h.html#addf5ec070e9499d36b7f2009ce736076">UNUSED</a>)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">//Problem constructor, using class definition above</span></div>
<div class="line">    <a class="code" href="../../d3/d42/classParameterStudy1DDemo.html">ParameterStudy1DDemo</a> <a class="code" href="../../d0/d5b/steady__axisym__advection__diffusion_8cc.html#a569d6908c13cebe207584b3d146c851e">problem</a>;</div>
<div class="line">    <span class="comment">// Setup the study dimensions that you want to perform</span></div>
<div class="line">    <a class="code" href="../../d0/d5b/steady__axisym__advection__diffusion_8cc.html#a569d6908c13cebe207584b3d146c851e">problem</a>.setStudyDimensions(4);</div>
<div class="line">    <span class="comment">// Setup the automatic numbering system (create/read COUNTER_DO_NOT_DEL file)</span></div>
<div class="line">    <a class="code" href="../../d0/d5b/steady__axisym__advection__diffusion_8cc.html#a569d6908c13cebe207584b3d146c851e">problem</a>.autoNumber();</div>
<div class="line">    <span class="comment">// Setup output file name</span></div>
<div class="line">    <a class="code" href="../../d0/d5b/steady__axisym__advection__diffusion_8cc.html#a569d6908c13cebe207584b3d146c851e">problem</a>.setName(<span class="stringliteral">&quot;ParameterStudy1DDemo&quot;</span>);</div>
<div class="line">    <span class="comment">// General simulation settings</span></div>
<div class="line">    <a class="code" href="../../d0/d5b/steady__axisym__advection__diffusion_8cc.html#a569d6908c13cebe207584b3d146c851e">problem</a>.setTimeStep(1<a class="code" href="../../de/d2c/Cwise__array__power__array_8cpp.html#a9eb5e92d9d691c1393e5e7c914731dbf">e</a>-5);</div>
<div class="line">    <a class="code" href="../../d0/d5b/steady__axisym__advection__diffusion_8cc.html#a569d6908c13cebe207584b3d146c851e">problem</a>.setTimeMax(0.1);</div>
<div class="line">    <a class="code" href="../../d0/d5b/steady__axisym__advection__diffusion_8cc.html#a569d6908c13cebe207584b3d146c851e">problem</a>.setSaveCount(5000);</div>
<div class="line">    <a class="code" href="../../d0/d5b/steady__axisym__advection__diffusion_8cc.html#a569d6908c13cebe207584b3d146c851e">problem</a>.setXMin(0.0);</div>
<div class="line">    <a class="code" href="../../d0/d5b/steady__axisym__advection__diffusion_8cc.html#a569d6908c13cebe207584b3d146c851e">problem</a>.setXMax(1.0);</div>
<div class="line">    <a class="code" href="../../d0/d5b/steady__axisym__advection__diffusion_8cc.html#a569d6908c13cebe207584b3d146c851e">problem</a>.setYMin(0.0);</div>
<div class="line">    <a class="code" href="../../d0/d5b/steady__axisym__advection__diffusion_8cc.html#a569d6908c13cebe207584b3d146c851e">problem</a>.setYMax(1.0);</div>
<div class="line">    <a class="code" href="../../d0/d5b/steady__axisym__advection__diffusion_8cc.html#a569d6908c13cebe207584b3d146c851e">problem</a>.setZMin(0.0);</div>
<div class="line">    <a class="code" href="../../d0/d5b/steady__axisym__advection__diffusion_8cc.html#a569d6908c13cebe207584b3d146c851e">problem</a>.setZMax(1.0);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Solve the problem</span></div>
<div class="line">    <a class="code" href="../../d0/d5b/steady__axisym__advection__diffusion_8cc.html#a569d6908c13cebe207584b3d146c851e">problem</a>.solve();</div>
<div class="line">    <span class="comment">// Give a successful exit code to the terminal</span></div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="ttc" id="aCwise__array__power__array_8cpp_html_a9eb5e92d9d691c1393e5e7c914731dbf"><div class="ttname"><a href="../../de/d2c/Cwise__array__power__array_8cpp.html#a9eb5e92d9d691c1393e5e7c914731dbf">e</a></div><div class="ttdeci">Array&lt; double, 1, 3 &gt; e(1./3., 0.5, 2.)</div></div>
<div class="ttc" id="aGeneralDefine_8h_html_addf5ec070e9499d36b7f2009ce736076"><div class="ttname"><a href="../../d5/de4/GeneralDefine_8h.html#addf5ec070e9499d36b7f2009ce736076">UNUSED</a></div><div class="ttdeci">#define UNUSED</div><div class="ttdef"><b>Definition:</b> GeneralDefine.h:18</div></div>
<div class="ttc" id="aT__protectiveWall_8cpp_html_a0ddf1224851353fc92bfbff6f499fa97"><div class="ttname"><a href="../../d9/d18/T__protectiveWall_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97">main</a></div><div class="ttdeci">int main(int argc, char *argv[])</div><div class="ttdef"><b>Definition:</b> T_protectiveWall.cpp:194</div></div>
<div class="ttc" id="asteady__axisym__advection__diffusion_8cc_html_a569d6908c13cebe207584b3d146c851e"><div class="ttname"><a href="../../d0/d5b/steady__axisym__advection__diffusion_8cc.html#a569d6908c13cebe207584b3d146c851e">problem</a></div><div class="ttdeci">Constructor for SteadyAxisymAdvectionDiffusion problem</div><div class="ttdef"><b>Definition:</b> steady_axisym_advection_diffusion.cc:213</div></div>
</div><!-- fragment --><p> If you would like to continue to the 2D or 3D parameter study demos:<br  />
<a class="el" href="../../d6/daa/ParameterStudy2D.html">ParameterStudy2DDemo</a> <br  />
<a class="el" href="../../d9/db2/ParameterStudy3D.html">ParameterStudy3DDemo</a> <br  />
 Or return to <a class="el" href="../../d7/db9/AdvancedTutorials.html#AdvancedOverview">Overview of advanced tutorials</a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../index.html">MercuryDPM Reference Manual</a></li><li class="navelem"><a class="el" href="../../d5/dac/Tutorials.html">Fun with MercuryDPM (Tutorials)</a></li><li class="navelem"><a class="el" href="../../d0/db0/BeginnerTutorials.html">Beginner tutorials</a></li><li class="navelem"><a class="el" href="../../d7/db9/AdvancedTutorials.html">Advanced tutorials</a></li>
    <li class="footer">Generated on Wed Aug 27 2025 17:05:13 for MercuryDPM by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
