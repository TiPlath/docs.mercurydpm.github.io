<!-- HTML header for doxygen 1.8.18-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MercuryDPM: Isotropic compression of a cuboidal REV</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../MDPM.css" rel="stylesheet" type="text/css"/>
<link href="../../codeLabels.css" rel="stylesheet" type="text/css"/>
<link href="../../MDPM-fork-corner.css" rel="stylesheet" type="text/css"/>
<link href="../../MDPM-dropdown-version.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../MDPM-fragment-copy-button.js"></script>
<script type="text/javascript">
DoxygenAwesomeFragmentCopyButton.init()
</script>
<script type="text/javascript" src="../../MDPM-paragraph-link.js"></script>
<script type="text/javascript">
DoxygenAwesomeParagraphLink.init()
</script>
<script type="text/javascript" src="../../MDPM-interactive-toc.js"></script>
<script type="text/javascript">
DoxygenAwesomeInteractiveToc.init()
</script>
<script type="text/javascript" src="../../MDPM-darkmode-toggle.js"></script>
<script type="text/javascript">
DoxygenAwesomeDarkModeToggle.init()
</script>
</head>
<body>
  <div id="bitbucket-corner">
   <a href="https://bitbucket.org/mercurydpm/mercurydpm/src/master/" target="_blank" id="fork-corner" class="fork-corner fc-pos-tr fc-animate fc-theme-bitbucket"></a>
  </div>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../mercury-logo-chosen-light-slogan.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname"> <!--MercuryDPM--!>
   <!-- BEGIN version select -->
   <div class="dropdown" id="projectnumber">
    <button class="dropbtn">v1.0</button>
    <div class="dropdown-content">
    </div>
   </div>
   <script type="text/javascript" src="../../MDPM-dropdown-version.js"></script>
<!-- END version select -->
   <!--&#160;<span id="projectnumber">revision: v1.0</span>-->
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<script type="text/javascript" src="../../MDPM-fork-corner.js"></script>
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('de/d51/IsoCompression.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Isotropic compression of a cuboidal REV </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h4><a class="anchor" id="autotoc_md158"></a>
Problem description</h4>
<p>This tutorial presents how to use the <a class="el" href="../../da/d61/classStressStrainControlBoundary.html">StressStrainControlBoundary</a> to achieve isotropic compression in a 3D cuboidal representative element volume. The particle bed is initially inserted into the box in a loose packing and then isotropically compressed using a constant strainrate control.</p>
<p>Here a short video of the code's output.  
<br><iframe width="600" height="600" src="https://www.youtube.com/embed/tCnbVvWyOek" frameborder="0" allowfullscreen></iframe>
</p>
<h3><a class="anchor" id="autotoc_md159"></a>
Headers</h3>
<p>The following headers are included: <br  />
</p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="../../d8/d02/Mercury3D_8h.html">Mercury3D.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="../../da/d68/LinearViscoelasticSpecies_8h.html">Species/LinearViscoelasticSpecies.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="../../de/d8e/StressStrainControlBoundary_8h.html">Boundaries/StressStrainControlBoundary.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="../../dc/de2/CubeInsertionBoundary_8h.html">Boundaries/CubeInsertionBoundary.h</a>&gt;</span></div>
<div class="ttc" id="aCubeInsertionBoundary_8h_html"><div class="ttname"><a href="../../dc/de2/CubeInsertionBoundary_8h.html">CubeInsertionBoundary.h</a></div></div>
<div class="ttc" id="aLinearViscoelasticSpecies_8h_html"><div class="ttname"><a href="../../da/d68/LinearViscoelasticSpecies_8h.html">LinearViscoelasticSpecies.h</a></div></div>
<div class="ttc" id="aMercury3D_8h_html"><div class="ttname"><a href="../../d8/d02/Mercury3D_8h.html">Mercury3D.h</a></div></div>
<div class="ttc" id="aStressStrainControlBoundary_8h_html"><div class="ttname"><a href="../../de/d8e/StressStrainControlBoundary_8h.html">StressStrainControlBoundary.h</a></div></div>
</div><!-- fragment --><p>These are the necessary headers to be included.</p>
<h3><a class="anchor" id="autotoc_md160"></a>
Before the main function</h3>
<p>Isotropic compression, like many of the previous tutorials, inherits from the Mercury3D class. <br  />
</p><div class="fragment"><div class="line"><span class="keyword">class </span><a class="code" href="../../dd/d47/classStressStrainControl.html">StressStrainControl</a> : <span class="keyword">public</span> <a class="code" href="../../d3/db1/classMercury3D.html">Mercury3D</a> </div>
<div class="ttc" id="aclassMercury3D_html"><div class="ttname"><a href="../../d3/db1/classMercury3D.html">Mercury3D</a></div><div class="ttdoc">This adds on the hierarchical grid code for 3D problems.</div><div class="ttdef"><b>Definition:</b> Mercury3D.h:16</div></div>
<div class="ttc" id="aclassStressStrainControl_html"><div class="ttname"><a href="../../dd/d47/classStressStrainControl.html">StressStrainControl</a></div><div class="ttdoc">[REV_ISO:headers]</div><div class="ttdef"><b>Definition:</b> REVIsotropicCompressionDemo.cpp:20</div></div>
</div><!-- fragment --><p> The different components of the class will be explained in turn in the following.</p>
<p>Step 1: Define the constructor: <br  />
Here we first define the constructor that contains user inputs (target stress, strainrate, gainFactor and the switch Boolean key for strainrate control on particle movements) which will be inserted later on in the main function. Then we define here also the domain size and specie. <br  />
</p><div class="fragment"><div class="line"><span class="keyword">public</span>:</div>
<div class="line">    <span class="comment">//Create the class and passing the user inputs using the constructors</span></div>
<div class="line">    <a class="code" href="../../dd/d47/classStressStrainControl.html">StressStrainControl</a>(<span class="keyword">const</span> <a class="code" href="../../d0/dcb/classMatrix3D.html">Matrix3D</a>&amp; stressGoal, <span class="keyword">const</span> <a class="code" href="../../d0/dcb/classMatrix3D.html">Matrix3D</a>&amp; strainRate, <span class="keyword">const</span> <a class="code" href="../../d0/dcb/classMatrix3D.html">Matrix3D</a>&amp; gainFactor,</div>
<div class="line">                        <span class="keywordtype">bool</span> isStrainRateControlled)</div>
<div class="line">            : stressGoal_(stressGoal), strainRate_(strainRate), gainFactor_(gainFactor),</div>
<div class="line">              isStrainRateControlled_(isStrainRateControlled)</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">//Define the domain size</span></div>
<div class="line">        setMin(<a class="code" href="../../d5/dc1/classVec3D.html">Vec3D</a>(0, 0, 0));</div>
<div class="line">        setMax(<a class="code" href="../../d5/dc1/classVec3D.html">Vec3D</a>(1, 1, 1));</div>
<div class="line">        <span class="comment">//Calculate the mass from smallest particle</span></div>
<div class="line">        <span class="keywordtype">double</span> mass = 2000 * <a class="code" href="../../d7/d28/namespaceconstants.html#a5f695d1bf98bf8537048b2eee827659d">constants::pi</a> * <a class="code" href="../../d6/d6c/namespacemathsFunc.html#afc01d91820e7def6b01bcdb29b02d69c">mathsFunc::cubic</a>(2.0 * 0.08) / 6.0;</div>
<div class="line">        <span class="comment">//Define the species for the particles</span></div>
<div class="line">        <a class="code" href="../../d9/d0c/classSpecies.html">LinearViscoelasticSpecies</a> species;</div>
<div class="line">        species.<a class="code" href="../../dc/d02/classParticleSpecies.html#a274df9fa08ef5580e54f8e9301f1b348">setDensity</a>(2000);</div>
<div class="line">        species.<a class="code" href="../../dd/de0/classLinearViscoelasticNormalSpecies.html#a0bc3df1e60498737e901d0df866a083b">setStiffnessAndRestitutionCoefficient</a>(10000, 0.4, mass);</div>
<div class="line">        speciesHandler.copyAndAddObject(species);</div>
<div class="line">    }</div>
<div class="ttc" id="aclassLinearViscoelasticNormalSpecies_html_a0bc3df1e60498737e901d0df866a083b"><div class="ttname"><a href="../../dd/de0/classLinearViscoelasticNormalSpecies.html#a0bc3df1e60498737e901d0df866a083b">LinearViscoelasticNormalSpecies::setStiffnessAndRestitutionCoefficient</a></div><div class="ttdeci">void setStiffnessAndRestitutionCoefficient(Mdouble k_, Mdouble eps, Mdouble mass)</div><div class="ttdoc">Sets k, disp such that it matches a given tc and eps for a collision of two copies of P.</div><div class="ttdef"><b>Definition:</b> LinearViscoelasticNormalSpecies.cc:165</div></div>
<div class="ttc" id="aclassMatrix3D_html"><div class="ttname"><a href="../../d0/dcb/classMatrix3D.html">Matrix3D</a></div><div class="ttdoc">Implementation of a 3D matrix.</div><div class="ttdef"><b>Definition:</b> Kernel/Math/Matrix.h:17</div></div>
<div class="ttc" id="aclassParticleSpecies_html_a274df9fa08ef5580e54f8e9301f1b348"><div class="ttname"><a href="../../dc/d02/classParticleSpecies.html#a274df9fa08ef5580e54f8e9301f1b348">ParticleSpecies::setDensity</a></div><div class="ttdeci">void setDensity(Mdouble density)</div><div class="ttdef"><b>Definition:</b> ParticleSpecies.cc:88</div></div>
<div class="ttc" id="aclassSpecies_html"><div class="ttname"><a href="../../d9/d0c/classSpecies.html">Species&lt; LinearViscoelasticNormalSpecies &gt;</a></div></div>
<div class="ttc" id="aclassVec3D_html"><div class="ttname"><a href="../../d5/dc1/classVec3D.html">Vec3D</a></div><div class="ttdef"><b>Definition:</b> Kernel/Math/Vector.h:30</div></div>
<div class="ttc" id="anamespaceconstants_html_a5f695d1bf98bf8537048b2eee827659d"><div class="ttname"><a href="../../d7/d28/namespaceconstants.html#a5f695d1bf98bf8537048b2eee827659d">constants::pi</a></div><div class="ttdeci">const Mdouble pi</div><div class="ttdef"><b>Definition:</b> ExtendedMath.h:23</div></div>
<div class="ttc" id="anamespacemathsFunc_html_afc01d91820e7def6b01bcdb29b02d69c"><div class="ttname"><a href="../../d6/d6c/namespacemathsFunc.html#afc01d91820e7def6b01bcdb29b02d69c">mathsFunc::cubic</a></div><div class="ttdeci">T cubic(const T val)</div><div class="ttdoc">calculates the cube of a number</div><div class="ttdef"><b>Definition:</b> ExtendedMath.h:95</div></div>
</div><!-- fragment --><p> Step 2: Set up initial conditions: <br  />
Here we setup the system dimensions, timestepping and gravity, then add particles using the CubeInsertionBoundary. After we inserted 96 particles, we then setup the StressStrainControlBoundary using user inputs. For the current case, the final boundary consists of 3 Periodic boundaries in x, y, z directions, respectively. <br  />
</p><div class="fragment"><div class="line"><span class="keyword">private</span>:</div>
<div class="line">    <span class="comment">//Here we set up the system parameters, adding particles and define boundaries</span></div>
<div class="line">    <span class="keywordtype">void</span> setupInitialConditions()<span class="keyword"> override</span></div>
<div class="line"><span class="keyword">    </span>{</div>
<div class="line">        <span class="comment">//Set up the micro parameters.</span></div>
<div class="line">        <span class="keywordtype">double</span> rhop = 2000;     <span class="comment">//particle density</span></div>
<div class="line">        <span class="keywordtype">double</span> K1 = 10000;      <span class="comment">//particle stiffness</span></div>
<div class="line">        <span class="keywordtype">double</span> en = 0.4;        <span class="comment">//restitution coefficient</span></div>
<div class="line">        <span class="keywordtype">double</span> <a class="code" href="../../de/d6c/namespaceUniformPSDSelfTest.html#ab2a01330429b8f42b72cc01f29f1beeb">radius</a> = 0.08;   <span class="comment">//particle radius</span></div>
<div class="line">        <span class="comment">//Calculate the mass from smallest particle</span></div>
<div class="line">        <span class="keywordtype">double</span> mass = rhop * <a class="code" href="../../d7/d28/namespaceconstants.html#a5f695d1bf98bf8537048b2eee827659d">constants::pi</a> * <a class="code" href="../../d6/d6c/namespacemathsFunc.html#afc01d91820e7def6b01bcdb29b02d69c">mathsFunc::cubic</a>(2.0 * <a class="code" href="../../de/d6c/namespaceUniformPSDSelfTest.html#ab2a01330429b8f42b72cc01f29f1beeb">radius</a>) / 6.0;</div>
<div class="line">        <span class="comment">//Calculate the contact duration</span></div>
<div class="line">        <span class="keywordtype">double</span> tc = <a class="code" href="../../d8/de9/AnnoyingScalar_8h.html#abe7b2405f1f05f9997193c680e8e2fe0">std::sqrt</a>(mass / 2.0 / K1 * (<a class="code" href="../../d6/d6c/namespacemathsFunc.html#a15e03a786272091e72c52cb6a6e550d4">mathsFunc::square</a>(<a class="code" href="../../d7/d28/namespaceconstants.html#a5f695d1bf98bf8537048b2eee827659d">constants::pi</a>) +</div>
<div class="line">                                                 <a class="code" href="../../d6/d6c/namespacemathsFunc.html#a15e03a786272091e72c52cb6a6e550d4">mathsFunc::square</a>(<a class="code" href="../../db/d6f/namespaceEigen_1_1bfloat16__impl.html#ab9c88b38f6bd34fbf8dde8fec8985d37">log</a>(en))));</div>
<div class="line">        setSystemDimensions(3); <span class="comment">//set the 3d simulation</span></div>
<div class="line">        setTimeStep(tc / 50); <span class="comment">//set the timestep based on the shortest contact duration</span></div>
<div class="line">        setGravity(<a class="code" href="../../d5/dc1/classVec3D.html">Vec3D</a>(0.0, 0.0, 0.0)); <span class="comment">//set gravity in the system</span></div>
<div class="line"> </div>
<div class="line">        <span class="comment">//Add particles</span></div>
<div class="line">        <a class="code" href="../../d2/d9f/classCubeInsertionBoundary.html">CubeInsertionBoundary</a> insertion;</div>
<div class="line">        <a class="code" href="../../d7/d41/classSphericalParticle.html">SphericalParticle</a> particle(speciesHandler.getObject(0));</div>
<div class="line">        particle.setRadius(<a class="code" href="../../de/d6c/namespaceUniformPSDSelfTest.html#ab2a01330429b8f42b72cc01f29f1beeb">radius</a>);</div>
<div class="line">        <span class="comment">//Insert 96 particles in the subvolume = 0.8*0.8*0.8 = 0.512, if failed by 100 times, it stops</span></div>
<div class="line">        insertion.<a class="code" href="../../d2/d9f/classCubeInsertionBoundary.html#a848da69ec268783eac79dbae19d33c05">set</a>(&amp;particle, 100, 0.8 * getMin(), 0.8 * getMax(), <a class="code" href="../../d5/dc1/classVec3D.html">Vec3D</a>(0, 0, 0), <a class="code" href="../../d5/dc1/classVec3D.html">Vec3D</a>(0, 0, 0));</div>
<div class="line">        insertion.<a class="code" href="../../d1/dcd/classInsertionBoundary.html#a9eb6ef204a6152012f66432abcd051ad">setInitialVolume</a>(1.0);</div>
<div class="line">        insertion.<a class="code" href="../../d1/dcd/classInsertionBoundary.html#a7ed62c3fad98ce9718d1ff9426733fd8">checkBoundaryBeforeTimeStep</a>(<span class="keyword">this</span>);</div>
<div class="line">        <a class="code" href="../../df/d79/Logger_8cc.html#a6bb54690071023a814dfcb33b0a5d9a4">logger</a>(<a class="code" href="../../db/ddd/mumps__solver_8h.html#a02cc55424e6075b41dcb20cfe3178d54">INFO</a>,<span class="stringliteral">&quot;Inserted % particles&quot;</span>,particleHandler.getSize());</div>
<div class="line"> </div>
<div class="line">        <span class="comment">//Delete all existing boundaries</span></div>
<div class="line">        boundaryHandler.clear();</div>
<div class="line">        <span class="comment">//Set up the deformation mode using the boundaries that are based on user&#39;s input</span></div>
<div class="line">        <a class="code" href="../../da/d61/classStressStrainControlBoundary.html">StressStrainControlBoundary</a> boundary;</div>
<div class="line">        boundary.<a class="code" href="../../de/d94/classBaseBoundary.html#acbfbaa235505abaa9469ac36bf909668">setHandler</a>(&amp;boundaryHandler);</div>
<div class="line">        boundary.<a class="code" href="../../da/d61/classStressStrainControlBoundary.html#a133cbecadd24f0afbf8e42f5cfb0cd99">set</a>(stressGoal_, strainRate_, gainFactor_, isStrainRateControlled_);</div>
<div class="line">        boundaryHandler.copyAndAddObject(boundary);</div>
<div class="line"> </div>
<div class="line">        </div>
<div class="line">    }</div>
<div class="ttc" id="aAnnoyingScalar_8h_html_abe7b2405f1f05f9997193c680e8e2fe0"><div class="ttname"><a href="../../d8/de9/AnnoyingScalar_8h.html#abe7b2405f1f05f9997193c680e8e2fe0">sqrt</a></div><div class="ttdeci">AnnoyingScalar sqrt(const AnnoyingScalar &amp;x)</div><div class="ttdef"><b>Definition:</b> AnnoyingScalar.h:134</div></div>
<div class="ttc" id="aLogger_8cc_html_a6bb54690071023a814dfcb33b0a5d9a4"><div class="ttname"><a href="../../df/d79/Logger_8cc.html#a6bb54690071023a814dfcb33b0a5d9a4">logger</a></div><div class="ttdeci">Logger&lt; MERCURYDPM_LOGLEVEL &gt; logger(&quot;MercuryKernel&quot;)</div><div class="ttdoc">Definition of different loggers with certain modules. A user can define its own custom logger here.</div></div>
<div class="ttc" id="aclassBaseBoundary_html_acbfbaa235505abaa9469ac36bf909668"><div class="ttname"><a href="../../de/d94/classBaseBoundary.html#acbfbaa235505abaa9469ac36bf909668">BaseBoundary::setHandler</a></div><div class="ttdeci">void setHandler(BoundaryHandler *handler)</div><div class="ttdoc">Sets the boundary's BoundaryHandler.</div><div class="ttdef"><b>Definition:</b> BaseBoundary.cc:113</div></div>
<div class="ttc" id="aclassCubeInsertionBoundary_html"><div class="ttname"><a href="../../d2/d9f/classCubeInsertionBoundary.html">CubeInsertionBoundary</a></div><div class="ttdoc">It's an insertion boundary which has cuboidal shape (yes, 'CuboidalInsertionBoundary' would have been...</div><div class="ttdef"><b>Definition:</b> CubeInsertionBoundary.h:21</div></div>
<div class="ttc" id="aclassCubeInsertionBoundary_html_a848da69ec268783eac79dbae19d33c05"><div class="ttname"><a href="../../d2/d9f/classCubeInsertionBoundary.html#a848da69ec268783eac79dbae19d33c05">CubeInsertionBoundary::set</a></div><div class="ttdeci">void set(BaseParticle *particleToCopy, unsigned int maxFailed, Vec3D posMin, Vec3D posMax, Vec3D velMin={0, 0, 0}, Vec3D velMax={0, 0, 0})</div><div class="ttdoc">Sets the properties of the InsertionBoundary for mutliple different particle types.</div><div class="ttdef"><b>Definition:</b> CubeInsertionBoundary.cc:86</div></div>
<div class="ttc" id="aclassInsertionBoundary_html_a7ed62c3fad98ce9718d1ff9426733fd8"><div class="ttname"><a href="../../d1/dcd/classInsertionBoundary.html#a7ed62c3fad98ce9718d1ff9426733fd8">InsertionBoundary::checkBoundaryBeforeTimeStep</a></div><div class="ttdeci">void checkBoundaryBeforeTimeStep(DPMBase *md) override</div><div class="ttdoc">Fills the boundary with particles.</div><div class="ttdef"><b>Definition:</b> InsertionBoundary.cc:163</div></div>
<div class="ttc" id="aclassInsertionBoundary_html_a9eb6ef204a6152012f66432abcd051ad"><div class="ttname"><a href="../../d1/dcd/classInsertionBoundary.html#a9eb6ef204a6152012f66432abcd051ad">InsertionBoundary::setInitialVolume</a></div><div class="ttdeci">void setInitialVolume(Mdouble initialVolume)</div><div class="ttdoc">Gets the Volume which should be inserted by the insertion routine.</div><div class="ttdef"><b>Definition:</b> InsertionBoundary.cc:620</div></div>
<div class="ttc" id="aclassSphericalParticle_html"><div class="ttname"><a href="../../d7/d41/classSphericalParticle.html">SphericalParticle</a></div><div class="ttdoc">A spherical particle is the most simple particle used in MercuryDPM.</div><div class="ttdef"><b>Definition:</b> SphericalParticle.h:16</div></div>
<div class="ttc" id="aclassStressStrainControlBoundary_html"><div class="ttname"><a href="../../da/d61/classStressStrainControlBoundary.html">StressStrainControlBoundary</a></div><div class="ttdoc">A cuboid box consists of periodic boundaries that can be strain/stress controlled and achieve differe...</div><div class="ttdef"><b>Definition:</b> StressStrainControlBoundary.h:34</div></div>
<div class="ttc" id="aclassStressStrainControlBoundary_html_a133cbecadd24f0afbf8e42f5cfb0cd99"><div class="ttname"><a href="../../da/d61/classStressStrainControlBoundary.html#a133cbecadd24f0afbf8e42f5cfb0cd99">StressStrainControlBoundary::set</a></div><div class="ttdeci">void set(const Matrix3D &amp;stressGoal, const Matrix3D &amp;strainRate, const Matrix3D &amp;pGain, bool isStrainRateControlled, const Matrix3D &amp;iGain={0, 0, 0, 0, 0, 0, 0, 0, 0})</div><div class="ttdoc">Sets all boundary inputs at once and determines which deformation mode it is, then combine the right ...</div><div class="ttdef"><b>Definition:</b> StressStrainControlBoundary.cc:288</div></div>
<div class="ttc" id="amumps__solver_8h_html_a02cc55424e6075b41dcb20cfe3178d54"><div class="ttname"><a href="../../db/ddd/mumps__solver_8h.html#a02cc55424e6075b41dcb20cfe3178d54">INFO</a></div><div class="ttdeci">#define INFO(i)</div><div class="ttdef"><b>Definition:</b> mumps_solver.h:54</div></div>
<div class="ttc" id="anamespaceEigen_1_1bfloat16__impl_html_ab9c88b38f6bd34fbf8dde8fec8985d37"><div class="ttname"><a href="../../db/d6f/namespaceEigen_1_1bfloat16__impl.html#ab9c88b38f6bd34fbf8dde8fec8985d37">Eigen::bfloat16_impl::log</a></div><div class="ttdeci">EIGEN_STRONG_INLINE EIGEN_DEVICE_FUNC bfloat16 log(const bfloat16 &amp;a)</div><div class="ttdef"><b>Definition:</b> BFloat16.h:618</div></div>
<div class="ttc" id="anamespaceUniformPSDSelfTest_html_ab2a01330429b8f42b72cc01f29f1beeb"><div class="ttname"><a href="../../de/d6c/namespaceUniformPSDSelfTest.html#ab2a01330429b8f42b72cc01f29f1beeb">UniformPSDSelfTest.radius</a></div><div class="ttdeci">radius</div><div class="ttdef"><b>Definition:</b> UniformPSDSelfTest.py:15</div></div>
<div class="ttc" id="anamespacemathsFunc_html_a15e03a786272091e72c52cb6a6e550d4"><div class="ttname"><a href="../../d6/d6c/namespacemathsFunc.html#a15e03a786272091e72c52cb6a6e550d4">mathsFunc::square</a></div><div class="ttdeci">T square(const T val)</div><div class="ttdoc">squares a number</div><div class="ttdef"><b>Definition:</b> ExtendedMath.h:86</div></div>
</div><!-- fragment --><p> Step 3: Declare private data members: <br  />
REV_IsotropicCompression has three <b>Matrix3D</b> variables and one Boolean variable. These variables are used to pass the user inputs via the constructor. <br  />
</p><div class="fragment"><div class="line">    <span class="comment">//initialize the private variables for passing the user&#39;s inputs in the constructor</span></div>
<div class="line">    <a class="code" href="../../d0/dcb/classMatrix3D.html">Matrix3D</a> stressGoal_;</div>
<div class="line">    <a class="code" href="../../d0/dcb/classMatrix3D.html">Matrix3D</a> strainRate_;</div>
<div class="line">    <a class="code" href="../../d0/dcb/classMatrix3D.html">Matrix3D</a> gainFactor_;</div>
<div class="line">    <span class="keywordtype">bool</span> isStrainRateControlled_;</div>
</div><!-- fragment --> <h3><a class="anchor" id="autotoc_md161"></a>
Main Function</h3>
<p>In the main function, we first define the target stress tensor, strainrate tensor, gainFactor tensor (only used if stress tensor is non-zero), and the boolean variable isStrainRateControlled. <br  />
Then a StressStrainControl object is created, after which some of its basic properties are set like its name, saveCount and outputs ON/OFF. Finally, the problem is actually solved by calling its <b>solve()</b> method. </p><div class="fragment"><div class="line"><span class="comment">//Here we define all the control parameters and solve the problem</span></div>
<div class="line"><span class="keywordtype">int</span> <a class="code" href="../../d9/d18/T__protectiveWall_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97">main</a>(<span class="keywordtype">int</span> argc <a class="code" href="../../d5/de4/GeneralDefine_8h.html#addf5ec070e9499d36b7f2009ce736076">UNUSED</a>, <span class="keywordtype">char</span>* argv[] <a class="code" href="../../d5/de4/GeneralDefine_8h.html#addf5ec070e9499d36b7f2009ce736076">UNUSED</a>)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">//We want strainrate control, so here we set the target Stress to free, all to zero</span></div>
<div class="line">    <a class="code" href="../../d0/dcb/classMatrix3D.html">Matrix3D</a> stressGoal;</div>
<div class="line">    stressGoal.<a class="code" href="../../d0/dcb/classMatrix3D.html#ab3ff30d4129dc08e6cf598ccd5513000">XX</a> = 0.0;</div>
<div class="line">    stressGoal.<a class="code" href="../../d0/dcb/classMatrix3D.html#a55aab01d3a10f5ee44b116fbf2cb9ea1">YY</a> = 0.0;</div>
<div class="line">    stressGoal.<a class="code" href="../../d0/dcb/classMatrix3D.html#a678b39fc9e90b6fb8bdf78f42200c102">ZZ</a> = 0.0;</div>
<div class="line">    stressGoal.<a class="code" href="../../d0/dcb/classMatrix3D.html#a556fbca90a63c2e81a114420ba7fcdde">XY</a> = 0.0;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">//Here we set the isotropic strainrate tensor, negative sign means compression</span></div>
<div class="line">    <a class="code" href="../../d0/dcb/classMatrix3D.html">Matrix3D</a> strainRate;</div>
<div class="line">    strainRate.<a class="code" href="../../d0/dcb/classMatrix3D.html#ab3ff30d4129dc08e6cf598ccd5513000">XX</a> = -0.02;</div>
<div class="line">    strainRate.<a class="code" href="../../d0/dcb/classMatrix3D.html#a55aab01d3a10f5ee44b116fbf2cb9ea1">YY</a> = -0.02;</div>
<div class="line">    strainRate.<a class="code" href="../../d0/dcb/classMatrix3D.html#a678b39fc9e90b6fb8bdf78f42200c102">ZZ</a> = -0.02;</div>
<div class="line">    strainRate.<a class="code" href="../../d0/dcb/classMatrix3D.html#a556fbca90a63c2e81a114420ba7fcdde">XY</a> = 0.0;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">//This is default gainFactor, if you choose to use stress control, you might want to tune this one</span></div>
<div class="line">    <a class="code" href="../../d0/dcb/classMatrix3D.html">Matrix3D</a> gainFactor;</div>
<div class="line">    gainFactor.<a class="code" href="../../d0/dcb/classMatrix3D.html#a556fbca90a63c2e81a114420ba7fcdde">XY</a> = 0.0001;</div>
<div class="line">    gainFactor.<a class="code" href="../../d0/dcb/classMatrix3D.html#ab3ff30d4129dc08e6cf598ccd5513000">XX</a> = 0.0001;</div>
<div class="line">    gainFactor.<a class="code" href="../../d0/dcb/classMatrix3D.html#a55aab01d3a10f5ee44b116fbf2cb9ea1">YY</a> = 0.0001;</div>
<div class="line">    gainFactor.<a class="code" href="../../d0/dcb/classMatrix3D.html#a678b39fc9e90b6fb8bdf78f42200c102">ZZ</a> = 0.0001;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">//This is by default set to true, so particles are controlled by affine movement.</span></div>
<div class="line">    <span class="comment">//If set it to false, then the particles will only follow the boundary movement.</span></div>
<div class="line">    <span class="keywordtype">bool</span> isStrainRateControlled = <span class="keyword">true</span>;</div>
<div class="line">    </div>
<div class="line">    <span class="comment">//Define the object and problem to solve</span></div>
<div class="line">    <a class="code" href="../../dd/d47/classStressStrainControl.html">StressStrainControl</a> dpm(stressGoal, strainRate, gainFactor, isStrainRateControlled);</div>
<div class="line">    </div>
<div class="line">    <span class="comment">//Set name</span></div>
<div class="line">    dpm.setName(<span class="stringliteral">&quot;Tutorial_IsotropicCompression&quot;</span>);</div>
<div class="line">    <span class="comment">//Set output and time stepping properties</span></div>
<div class="line">    dpm.setTimeMax(10);</div>
<div class="line">    <span class="comment">//Set the SaveCount, i.e. 100 timesteps saving one snapshot</span></div>
<div class="line">    dpm.setSaveCount(100);</div>
<div class="line">    <span class="comment">//Currently all the normal file outputs are switched off, simply switch it on by replacing NO_FILE to ONE_FILE</span></div>
<div class="line"><span class="comment">//    dpm.dataFile.setFileType(FileType::NO_FILE);</span></div>
<div class="line"><span class="comment">//    dpm.restartFile.setFileType(FileType::NO_FILE);</span></div>
<div class="line"><span class="comment">//    dpm.fStatFile.setFileType(FileType::NO_FILE);</span></div>
<div class="line"><span class="comment">//    dpm.eneFile.setFileType(FileType::NO_FILE);</span></div>
<div class="line">    <span class="comment">//Set output the particle information in VTK for ParaView Visualisation</span></div>
<div class="line">    dpm.setParticlesWriteVTK(<span class="keyword">true</span>);</div>
<div class="line">    <span class="comment">//Because of periodic boundary, out put wall files is not necessary in this case</span></div>
<div class="line">    <span class="comment">//dpm.wallHandler.setWriteVTK(true);</span></div>
<div class="line">    <span class="comment">//Solve the problem</span></div>
<div class="line">    dpm.solve();</div>
<div class="line">}</div>
<div class="ttc" id="aGeneralDefine_8h_html_addf5ec070e9499d36b7f2009ce736076"><div class="ttname"><a href="../../d5/de4/GeneralDefine_8h.html#addf5ec070e9499d36b7f2009ce736076">UNUSED</a></div><div class="ttdeci">#define UNUSED</div><div class="ttdef"><b>Definition:</b> GeneralDefine.h:18</div></div>
<div class="ttc" id="aT__protectiveWall_8cpp_html_a0ddf1224851353fc92bfbff6f499fa97"><div class="ttname"><a href="../../d9/d18/T__protectiveWall_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97">main</a></div><div class="ttdeci">int main(int argc, char *argv[])</div><div class="ttdef"><b>Definition:</b> T_protectiveWall.cpp:194</div></div>
<div class="ttc" id="aclassMatrix3D_html_a556fbca90a63c2e81a114420ba7fcdde"><div class="ttname"><a href="../../d0/dcb/classMatrix3D.html#a556fbca90a63c2e81a114420ba7fcdde">Matrix3D::XY</a></div><div class="ttdeci">Mdouble XY</div><div class="ttdef"><b>Definition:</b> Kernel/Math/Matrix.h:22</div></div>
<div class="ttc" id="aclassMatrix3D_html_a55aab01d3a10f5ee44b116fbf2cb9ea1"><div class="ttname"><a href="../../d0/dcb/classMatrix3D.html#a55aab01d3a10f5ee44b116fbf2cb9ea1">Matrix3D::YY</a></div><div class="ttdeci">Mdouble YY</div><div class="ttdef"><b>Definition:</b> Kernel/Math/Matrix.h:22</div></div>
<div class="ttc" id="aclassMatrix3D_html_a678b39fc9e90b6fb8bdf78f42200c102"><div class="ttname"><a href="../../d0/dcb/classMatrix3D.html#a678b39fc9e90b6fb8bdf78f42200c102">Matrix3D::ZZ</a></div><div class="ttdeci">Mdouble ZZ</div><div class="ttdef"><b>Definition:</b> Kernel/Math/Matrix.h:22</div></div>
<div class="ttc" id="aclassMatrix3D_html_ab3ff30d4129dc08e6cf598ccd5513000"><div class="ttname"><a href="../../d0/dcb/classMatrix3D.html#ab3ff30d4129dc08e6cf598ccd5513000">Matrix3D::XX</a></div><div class="ttdeci">Mdouble XX</div><div class="ttdoc">all nine matrix elements</div><div class="ttdef"><b>Definition:</b> Kernel/Math/Matrix.h:22</div></div>
</div><!-- fragment --> <h3><a class="anchor" id="autotoc_md162"></a>
Reference:</h3>
<p><a href="https://www.jstage.jst.go.jp/article/kona/30/0/30_2013011/_article">Imole, O. I., Kumar, N., Magnanimo, V., &amp; Luding, S. (2013). Hydrostatic and shear behavior of frictionless granular assemblies under different deformation conditions. KONA Powder and Particle Journal, 30, 84-108.</a></p>
<p>If you would like to know more about the definitions used in the StressStrainControlBoundary and various deformation possibilities, please click here (right click and open in a new tab if left click does not work): <a href="../../../../../Documentation/AdditionalDocumentation/StressStrainControlBoundary.pdf">StressStrainControlBoundary.pdf </a></p>
<p>(Return to <a class="el" href="../../d7/db9/AdvancedTutorials.html#AdvancedOverview">Overview of advanced tutorials</a>) </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../index.html">MercuryDPM Reference Manual</a></li><li class="navelem"><a class="el" href="../../d5/dac/Tutorials.html">Fun with MercuryDPM (Tutorials)</a></li><li class="navelem"><a class="el" href="../../d0/db0/BeginnerTutorials.html">Beginner tutorials</a></li><li class="navelem"><a class="el" href="../../d7/db9/AdvancedTutorials.html">Advanced tutorials</a></li>
    <li class="footer">Generated on Wed Aug 27 2025 17:05:13 for MercuryDPM by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
