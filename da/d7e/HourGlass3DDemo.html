<!-- HTML header for doxygen 1.8.18-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MercuryDPM: Flow through a 3D hourglass/silo</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../MDPM.css" rel="stylesheet" type="text/css"/>
<link href="../../codeLabels.css" rel="stylesheet" type="text/css"/>
<link href="../../MDPM-fork-corner.css" rel="stylesheet" type="text/css"/>
<link href="../../MDPM-dropdown-version.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../MDPM-fragment-copy-button.js"></script>
<script type="text/javascript">
DoxygenAwesomeFragmentCopyButton.init()
</script>
<script type="text/javascript" src="../../MDPM-paragraph-link.js"></script>
<script type="text/javascript">
DoxygenAwesomeParagraphLink.init()
</script>
<script type="text/javascript" src="../../MDPM-interactive-toc.js"></script>
<script type="text/javascript">
DoxygenAwesomeInteractiveToc.init()
</script>
<script type="text/javascript" src="../../MDPM-darkmode-toggle.js"></script>
<script type="text/javascript">
DoxygenAwesomeDarkModeToggle.init()
</script>
</head>
<body>
  <div id="bitbucket-corner">
   <a href="https://bitbucket.org/mercurydpm/mercurydpm/src/master/" target="_blank" id="fork-corner" class="fork-corner fc-pos-tr fc-animate fc-theme-bitbucket"></a>
  </div>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../mercury-logo-chosen-light-slogan.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname"> <!--MercuryDPM--!>
   <!-- BEGIN version select -->
   <div class="dropdown" id="projectnumber">
    <button class="dropbtn">v1.0</button>
    <div class="dropdown-content">
    </div>
   </div>
   <script type="text/javascript" src="../../MDPM-dropdown-version.js"></script>
<!-- END version select -->
   <!--&#160;<span id="projectnumber">revision: v1.0</span>-->
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<script type="text/javascript" src="../../MDPM-fork-corner.js"></script>
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('da/d7e/HourGlass3DDemo.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Flow through a 3D hourglass/silo </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><img src="../../HourGlass3DDemo.png" alt="" align="right" class="inline"/></p>
<h4><a class="anchor" id="autotoc_md104"></a>
Problem description</h4>
<p>A 3D hour glass/silo is simulated, i.e. a cylindrical domain with a neck in the middle (see snapshot on the right). Particles are inserted into the upper half of the domain and flow into the lower half due to gravity.</p>
<p>Here a short ParaView animation of the code's output.  
<br><iframe width="420" height="315" src="https://www.youtube.com/embed/2QxP2MT2TVo" frameborder="0" allowfullscreen></iframe>
</p>
<p>This code illustrates the effect of friction in DPM simulations. If the friction is high enough, arching is observed at the neck, where particles interlock to obstruct the flow. It also illustrates how to use AxisymmetricIntersectionOfWalls to set up axisymmetrical shapes, i.e. the outer cylinder and the neck.</p>
<h3><a class="anchor" id="autotoc_md105"></a>
Defining an axisymmetric wall</h3>
<p>The outer wall is defined by an AxisymmetricIntersectionOfWalls object: </p><div class="fragment"><div class="line">        <a class="code" href="../../dc/d9f/classAxisymmetricIntersectionOfWalls.html">AxisymmetricIntersectionOfWalls</a> w1;</div>
<div class="line">        w1.<a class="code" href="../../de/d70/classIntersectionOfWalls.html#af38fc9c5738da408dfb04d4ab4ba1e86">setSpecies</a>(speciesHandler.getObject(0));</div>
<div class="line">        w1.<a class="code" href="../../d8/d84/classBaseInteractable.html#a8650c49093f29960083d755945e6cdfc">setPosition</a>(<a class="code" href="../../d5/dc1/classVec3D.html">Vec3D</a>(mid.X, mid.Y, 0));</div>
<div class="line">        w1.<a class="code" href="../../dc/d9f/classAxisymmetricIntersectionOfWalls.html#a2db8ba4302380ef71c438961be7b4705">setAxis</a>(<a class="code" href="../../d5/dc1/classVec3D.html">Vec3D</a>(0, 0, 1));</div>
<div class="line">        w1.<a class="code" href="../../de/d70/classIntersectionOfWalls.html#a484d1569fb68b47cd26ee33e90b242ec">addObject</a>(<a class="code" href="../../d5/dc1/classVec3D.html">Vec3D</a>(1, 0, 0), <a class="code" href="../../d5/dc1/classVec3D.html">Vec3D</a>((getXMax() - getXMin()) / 2.0, 0, 0));</div>
<div class="line">        <span class="comment">// Display the cylinder only, when not coinciding with the neck</span></div>
<div class="line">        std::vector&lt;Mdouble&gt; displayedSegmentsCylinder = {-<a class="code" href="../../d7/d28/namespaceconstants.html#ae4dcbfebb9368e14ed372ed6e91d74ec">constants::inf</a>, mid.Z - contractionHeight, mid.Z + contractionHeight, <a class="code" href="../../d7/d28/namespaceconstants.html#ae4dcbfebb9368e14ed372ed6e91d74ec">constants::inf</a>};</div>
<div class="line">        w1.<a class="code" href="../../dc/d9f/classAxisymmetricIntersectionOfWalls.html#ad8d8e86ca6dbeb76196ca8de7fe6f2d9">setDisplayedSegments</a>(displayedSegmentsCylinder);</div>
<div class="line">        wallHandler.copyAndAddObject(w1);</div>
<div class="ttc" id="aclassAxisymmetricIntersectionOfWalls_html"><div class="ttname"><a href="../../dc/d9f/classAxisymmetricIntersectionOfWalls.html">AxisymmetricIntersectionOfWalls</a></div><div class="ttdoc">Use AxisymmetricIntersectionOfWalls to Screw Screw::read Screw::read Screw::read define axisymmetric ...</div><div class="ttdef"><b>Definition:</b> AxisymmetricIntersectionOfWalls.h:105</div></div>
<div class="ttc" id="aclassAxisymmetricIntersectionOfWalls_html_a2db8ba4302380ef71c438961be7b4705"><div class="ttname"><a href="../../dc/d9f/classAxisymmetricIntersectionOfWalls.html#a2db8ba4302380ef71c438961be7b4705">AxisymmetricIntersectionOfWalls::setAxis</a></div><div class="ttdeci">void setAxis(Vec3D a)</div><div class="ttdef"><b>Definition:</b> AxisymmetricIntersectionOfWalls.cc:149</div></div>
<div class="ttc" id="aclassAxisymmetricIntersectionOfWalls_html_ad8d8e86ca6dbeb76196ca8de7fe6f2d9"><div class="ttname"><a href="../../dc/d9f/classAxisymmetricIntersectionOfWalls.html#ad8d8e86ca6dbeb76196ca8de7fe6f2d9">AxisymmetricIntersectionOfWalls::setDisplayedSegments</a></div><div class="ttdeci">void setDisplayedSegments(const std::vector&lt; Mdouble &gt; &amp;displayedSegments)</div><div class="ttdoc">Sets the displayed segments.</div><div class="ttdef"><b>Definition:</b> AxisymmetricIntersectionOfWalls.h:189</div></div>
<div class="ttc" id="aclassBaseInteractable_html_a8650c49093f29960083d755945e6cdfc"><div class="ttname"><a href="../../d8/d84/classBaseInteractable.html#a8650c49093f29960083d755945e6cdfc">BaseInteractable::setPosition</a></div><div class="ttdeci">virtual void setPosition(const Vec3D &amp;position)</div><div class="ttdoc">Sets the position of this BaseInteractable.</div><div class="ttdef"><b>Definition:</b> BaseInteractable.h:218</div></div>
<div class="ttc" id="aclassIntersectionOfWalls_html_a484d1569fb68b47cd26ee33e90b242ec"><div class="ttname"><a href="../../de/d70/classIntersectionOfWalls.html#a484d1569fb68b47cd26ee33e90b242ec">IntersectionOfWalls::addObject</a></div><div class="ttdeci">void addObject(Vec3D normal, Vec3D point)</div><div class="ttdoc">Adds a wall to the set of infinite walls, given a normal vector pointing into the wall (i....</div><div class="ttdef"><b>Definition:</b> IntersectionOfWalls.cc:117</div></div>
<div class="ttc" id="aclassIntersectionOfWalls_html_af38fc9c5738da408dfb04d4ab4ba1e86"><div class="ttname"><a href="../../de/d70/classIntersectionOfWalls.html#af38fc9c5738da408dfb04d4ab4ba1e86">IntersectionOfWalls::setSpecies</a></div><div class="ttdeci">void setSpecies(const ParticleSpecies *species)</div><div class="ttdoc">sets species of subwalls as well</div><div class="ttdef"><b>Definition:</b> IntersectionOfWalls.cc:51</div></div>
<div class="ttc" id="aclassVec3D_html"><div class="ttname"><a href="../../d5/dc1/classVec3D.html">Vec3D</a></div><div class="ttdef"><b>Definition:</b> Kernel/Math/Vector.h:30</div></div>
<div class="ttc" id="anamespaceconstants_html_ae4dcbfebb9368e14ed372ed6e91d74ec"><div class="ttname"><a href="../../d7/d28/namespaceconstants.html#ae4dcbfebb9368e14ed372ed6e91d74ec">constants::inf</a></div><div class="ttdeci">const Mdouble inf</div><div class="ttdef"><b>Definition:</b> GeneralDefine.h:23</div></div>
</div><!-- fragment --><p>The neck is also defined by an AxisymmetricIntersectionOfWalls object: </p><div class="fragment"><div class="line">        <a class="code" href="../../dc/d9f/classAxisymmetricIntersectionOfWalls.html">AxisymmetricIntersectionOfWalls</a> w2;</div>
<div class="line">        w2.<a class="code" href="../../de/d70/classIntersectionOfWalls.html#af38fc9c5738da408dfb04d4ab4ba1e86">setSpecies</a>(speciesHandler.getObject(0));</div>
<div class="line">        w2.<a class="code" href="../../d8/d84/classBaseInteractable.html#a8650c49093f29960083d755945e6cdfc">setPosition</a>(<a class="code" href="../../d5/dc1/classVec3D.html">Vec3D</a>(mid.X, mid.Y, 0));</div>
<div class="line">        w2.<a class="code" href="../../dc/d9f/classAxisymmetricIntersectionOfWalls.html#a2db8ba4302380ef71c438961be7b4705">setAxis</a>(<a class="code" href="../../d5/dc1/classVec3D.html">Vec3D</a>(0, 0, 1));</div>
<div class="line">        std::vector&lt;Vec3D&gt; points(3);</div>
<div class="line">        <span class="comment">//define the neck as a prism through corners of your prismatic wall in clockwise direction</span></div>
<div class="line">        points[0] = <a class="code" href="../../d5/dc1/classVec3D.html">Vec3D</a>(halfWidth, 0.0, mid.Z + contractionHeight);</div>
<div class="line">        points[1] = <a class="code" href="../../d5/dc1/classVec3D.html">Vec3D</a>(halfWidth - contractionWidth, 0.0, mid.Z);</div>
<div class="line">        points[2] = <a class="code" href="../../d5/dc1/classVec3D.html">Vec3D</a>(halfWidth, 0.0, mid.Z - contractionHeight);</div>
<div class="line">        <span class="comment">// Display the neck only until reaching the cylinder</span></div>
<div class="line">        std::vector&lt;Mdouble&gt; displayedSegmentsPrism = {mid.Z - contractionHeight, mid.Z + contractionHeight};</div>
<div class="line">        w2.<a class="code" href="../../dc/d9f/classAxisymmetricIntersectionOfWalls.html#ad8d8e86ca6dbeb76196ca8de7fe6f2d9">setDisplayedSegments</a>(displayedSegmentsPrism);</div>
<div class="line">        w2.<a class="code" href="../../de/d70/classIntersectionOfWalls.html#a813855f943b0eeeccbb0124b2d629459">createOpenPrism</a>(points);</div>
<div class="line">        wallHandler.copyAndAddObject(w2);</div>
<div class="ttc" id="aclassIntersectionOfWalls_html_a813855f943b0eeeccbb0124b2d629459"><div class="ttname"><a href="../../de/d70/classIntersectionOfWalls.html#a813855f943b0eeeccbb0124b2d629459">IntersectionOfWalls::createOpenPrism</a></div><div class="ttdeci">void createOpenPrism(std::vector&lt; Vec3D &gt; points, Vec3D prismAxis)</div><div class="ttdoc">Creates an open prism which is a polygon between the points, except the first and last point,...</div><div class="ttdef"><b>Definition:</b> IntersectionOfWalls.cc:446</div></div>
</div><!-- fragment --><p> (Return to <a class="el" href="../../d7/db9/AdvancedTutorials.html#AdvancedOverview">Overview of advanced tutorials</a>) </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../index.html">MercuryDPM Reference Manual</a></li><li class="navelem"><a class="el" href="../../d5/dac/Tutorials.html">Fun with MercuryDPM (Tutorials)</a></li><li class="navelem"><a class="el" href="../../d0/db0/BeginnerTutorials.html">Beginner tutorials</a></li><li class="navelem"><a class="el" href="../../d7/db9/AdvancedTutorials.html">Advanced tutorials</a></li>
    <li class="footer">Generated on Wed Aug 27 2025 17:05:13 for MercuryDPM by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
